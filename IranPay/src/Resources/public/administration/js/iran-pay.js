(this.webpackJsonp=this.webpackJsonp||[]).push([["iran-pay"],{DACF:function(t,e){t.exports='{% block transaction_list %}\n    <sw-page class="iranpay-transaction-list">\n        <template slot="content">\n            {% block transaction_list_content %}\n                <iranpay-transactions-list\n                    v-if="transactions"\n                    :items="transactions"\n                    :repository="repository"\n                    :showActions="false"\n                    :showSettings="false"\n                    :showSelection="false"\n                    :allowColumnEdit="false"\n                    :sortIsAllowed="true"\n                    :columns="columns">\n\n                    <template slot="column-customer.lastName" slot-scope="{item}">\n                        <router-link class="sw-data-grid__cell-value"\n                                     :to="{ name: \'sw.customer.detail.base\', params: { id: item.customerId } }">\n                            {{ item.customer.lastName }} {{ item.customer.firstName }}\n                        </router-link>\n                    </template>\n\n                    <template slot="column-order.orderNumber" slot-scope="{item}">\n                        <router-link class="sw-data-grid__cell-value"\n                                     :to="{ name: \'sw.order.detail.base\', params: { id: item.orderId }}">\n                            {{ item.order.orderNumber }}\n                        </router-link>\n                    </template>\n\n                    <template slot="column-status" slot-scope="{ item }">\n                        <sw-label :variant="getVariantFromPaymentState(item.stateMachineState.technicalName)" appearance="pill">\n                            {{ item.stateMachineState.name }}\n                        </sw-label>\n                    </template>\n\n                    <template slot="column-n.status" slot-scope="{ item }">\n                        {{ item.status }}\n                    </template>\n\n                    <template slot="column-paymentMethod" slot-scope="{ item }">\n                        {{ item.paymentMethod }}\n                    </template>\n\n                    <template slot="column-exception" slot-scope="{ item }">\n                        {{ item.exception }}\n{#                        <span style="color: red" v-if="item.exception" @click="openModal">Exception</span>#}\n{#                        <sw-modal#}\n{#                            v-if="showExModal"#}\n{#                            slector="p"#}\n{#                            @modal-close="showExModal = false"#}\n{#                            title="Exception">#}\n{#                                <p v-html="item.exception">#}\n{#                                    {{ item.exception }}#}\n{#                                </p>#}\n{#                        </sw-modal>#}\n\n                    </template>\n\n                    <template slot-scope="{ item }">\n\n                    </template>\n\n\n                    <template slot="column-updatedAt" slot-scope="{ item }">\n                        {{ getData(item.updatedAt) }}\n                    </template>\n\n                    <template slot="column-createdAt" slot-scope="{ item }">\n                        {{ getData(item.createdAt) }}\n                    </template>\n\n                </iranpay-transactions-list>\n\n\n            {% endblock %}\n        </template>\n\n    </sw-page>\n{% endblock %}\n'},I6pN:function(t){t.exports=JSON.parse('{"module":{"name":"IRAN PAY. transactions list","title":"IRAN PAY. transactions list","description":"IRAN PAY. transactions list","navigation":{"label":"Iran-PAY. transactions"}},"order":{"transaction":{"paid":"Paid (Capture)","cancelled":"Cancelled (Void)"}},"transactions-list":{"iranpay_transaction_id":"Transaction ID","payment_id":"Payment ID","amount":"Amount","created_at":"Created at","updated_at":"Updated at","order_number":"Order number","customer":"Customer","status":"Transaction status","links":"Links"}}')},Pq1B:function(t,e,a){"use strict";a.r(e);var n=a("dJsC"),s=a.n(n);const{Component:i}=Shopware,{Criteria:r}=Shopware.Data;i.extend("iranpay-transactions-list","sw-data-grid",{template:s.a,props:{detailRoute:{type:String,required:!1},repository:{required:!0,type:Object},items:{type:Array,required:!1,default:null},dataSource:{type:[Array,Object],required:!1},showSettings:{type:Boolean,default:!0,required:!1},fullPage:{type:Boolean,default:!0,required:!1},allowInlineEdit:{type:Boolean,default:!0,required:!1},allowColumnEdit:{type:Boolean,default:!0,required:!1},sortIsAllowed:{type:Boolean,default:!0,required:!1}},data:()=>({deleteId:null,showBulkDeleteModal:!1,isBulkLoading:!1,page:1,limit:25,total:10}),watch:{items(){this.applyResult(this.items)}},methods:{createdComponent(){this.initGridColumns(),this.items&&this.applyResult(this.items)},applyResult(t){this.records=t,this.total=t.total,this.page=t.criteria.page,this.limit=t.criteria.limit,this.loading=!1,this.$emit("update-records",t)},doSearch(){return this.loading=!0,this.repository.search(this.items.criteria,this.items.context).then(this.applyResult)},revert(){const t=this.doSearch();return this.$emit("inline-edit-cancel",t),t},sort(t){if(!t.sortIsAllowed)return!1;this.items.criteria.resetSorting();let e="ASC";return this.currentSortBy===t.dataIndex&&this.currentSortDirection===e&&(e="DESC"),t.dataIndex.split(",").forEach(a=>{this.items.criteria.addSorting(r.sort(a,e,t.naturalSorting))}),this.currentSortBy=t.dataIndex,this.currentSortDirection=e,this.currentNaturalSorting=t.naturalSorting,this.$emit("column-sort",t),this.doSearch()},paginate({page:t=1,limit:e=25}){return this.items.criteria.setPage(t),this.items.criteria.setLimit(e),this.doSearch()}}});var o=a("DACF"),l=a.n(o);const{Component:d}=Shopware,{Criteria:p}=Shopware.Data;d.register("iranpay-transactions-list-component",{template:l.a,inject:["repositoryFactory","stateStyleDataProviderService"],data:()=>({repository:null,transactions:null,showExModal:!1}),metaInfo(){return{title:this.$createTitle()}},computed:{columns(){return[{property:"createdAt",dataIndex:"createdAt",label:this.$t("transactions-list.created_at"),sortIsAllowed:!0,allowResize:!0},{property:"updatedAt",dataIndex:"updatedAt",label:this.$t("transactions-list.updated_at"),sortIsAllowed:!0,allowResize:!0},{property:"paymentMethod",dataIndex:"paymentMethod",label:"Method Name",allowResize:!0,sortIsAllowed:!0,primary:!0},{property:"iranpayTransactionId",dataIndex:"iranpayTransactionId",label:this.$t("transactions-list.iranpay_transaction_id"),allowResize:!0,sortIsAllowed:!0,primary:!0},{property:"order.orderNumber",dataIndex:"orderNumber",label:this.$t("transactions-list.order_number"),sortIsAllowed:!1,allowResize:!0},{property:"amount",dataIndex:"amount",label:this.$t("transactions-list.amount"),allowResize:!0,sortIsAllowed:!0,primary:!0},{property:"customer.lastName",dataIndex:"customer",label:this.$t("transactions-list.customer"),allowResize:!0,sortIsAllowed:!1,primary:!0},{property:"status",dataIndex:"status",label:this.$t("transactions-list.status"),allowResize:!0,sortIsAllowed:!1,primary:!0},{property:"n.status",dataIndex:"n.status",label:"Status",allowResize:!0,sortIsAllowed:!1,primary:!0},{property:"exception",dataIndex:"exception",label:"ERROR",allowResize:!0,sortIsAllowed:!1,primary:!0}]}},created(){this.repository=this.repositoryFactory.create("iranpay_transactions");let t=new p;t.addAssociation("order"),t.addAssociation("customer"),t.addAssociation("stateMachineState"),t.addSorting(p.sort("iranpay_transactions.createdAt","DESC")),this.repository.search(t,Shopware.Context.api).then(t=>{this.transactions=t})},methods:{openModal(){this.showExModal=!0},getVariantFromPaymentState(t){return this.stateStyleDataProviderService.getStyle("order_transaction.state",t).variant},getData(t){if(t<=0)return"";let e=/(?<year>\d{4}).(?<month>\d{2}).(?<day>\d{2}).(?<hours>\d{2}).(?<minutes>\d{2})/gm.exec(t).groups;return e.year+"-"+e.month+"-"+e.day+" "+e.hours+":"+e.minutes}}});var c=a("I6pN");const{Module:m}=Shopware;m.register("iranpay-payment-module",{type:"plugin",name:"module.name",title:"module.title",description:"module.description",color:"#23ac70",snippets:{"en-GB":c},routes:{list:{component:"iranpay-transactions-list-component",path:"list"}},navigation:[{parent:"sw-order",label:"module.navigation.label",path:"iranpay.payment.module.list"}]})},dJsC:function(t,e){t.exports='{% block sw_data_grid_slot_pagination %}\n    <sw-pagination v-bind="{ page, limit, total }" :total-visible="7" @page-change="paginate"></sw-pagination>\n{% endblock %}\n'}},[["Pq1B","runtime"]]]);